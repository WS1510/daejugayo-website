<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 - 대주가요</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding-top: 100px; /* 네비게이션바를 위한 패딩 */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #718096;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            color: #718096;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            font-size: 1.8em;
            color: #4a5568;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .applicant-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .applicant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .applicant-info h3 {
            color: #4a5568;
            margin-bottom: 5px;
        }

        .applicant-info p {
            color: #718096;
            font-size: 0.9em;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .status-pending {
            background: #fed7d7;
            color: #c53030;
        }

        .status-approved {
            background: #c6f6d5;
            color: #2f855a;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-approve {
            background: #48bb78;
            color: white;
        }

        .btn-approve:hover {
            background: #38a169;
        }

        .btn-reject {
            background: #f56565;
            color: white;
        }

        .btn-reject:hover {
            background: #e53e3e;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
            margin: 10px 5px;
        }

        .btn-primary:hover {
            background: #5a67d8;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .notification {
            background: #bee3f8;
            border: 1px solid #90cdf4;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .notification.success {
            background: #c6f6d5;
            border-color: #9ae6b4;
            color: #2f855a;
        }

        .notification.warning {
            background: #fefcbf;
            border-color: #f6e05e;
            color: #d69e2e;
        }

        .empty-state {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            color: #718096;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: #4a5568;
        }

        /* 지원서 모달 스타일 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            /* Flexbox로 중앙정렬 */
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 0;
            border-radius: 15px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            /* 애니메이션 효과 */
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
            /* 스크롤바 숨기기 */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }

        /* Webkit 브라우저 (Chrome, Safari) 스크롤바 숨기기 */
        .modal-content::-webkit-scrollbar {
            display: none;
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5em;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .application-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .application-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-label {
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 5px;
        }

        .info-value {
            font-weight: bold;
            color: #2d3748;
        }

        .applicant-name {
            cursor: pointer;
            color: #667eea;
            text-decoration: underline;
        }

        .applicant-name:hover {
            color: #5a67d8;
        }

        /* 모바일 모달 최적화 */
        @media (max-width: 768px) {
            .modal {
                padding: 10px;
            }
            
            .modal-content {
                max-height: 95vh;
                width: 100%;
            }
            
            .modal-header {
                padding: 15px 20px;
            }
            
            .modal-header h2 {
                font-size: 1.3em;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .applicant-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- 네비게이션 바 -->
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="nav-logo">🎵 PLAYLOG SOUNDLAB</h1>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">🏠 메인사이트</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link admin-welcome">👨‍💼 관리자 모드</a>
                    </li>
                </ul>
                <div class="nav-toggle" onclick="toggleMobileMenu()">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- 헤더 -->
        <div class="header">
            <h1>관리자 페이지</h1>
            <p>보컬 지원자 관리 시스템</p>
        </div>

        <!-- 통계 카드 -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">👥</div>
                <div class="stat-number" id="total-count">0</div>
                <div class="stat-label">총 지원자</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">✅</div>
                <div class="stat-number" id="approved-count">0</div>
                <div class="stat-label">승인 완료</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">⏳</div>
                <div class="stat-number" id="pending-count">0</div>
                <div class="stat-label">심사 대기</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">❌</div>
                <div class="stat-number" id="rejected-count">0</div>
                <div class="stat-label">거절됨</div>
            </div>
        </div>

        <!-- 메인 콘텐츠 -->
        <div class="main-content">
            <!-- 지원자 목록 -->
            <div class="section">
                <h2>지원자 관리</h2>
                
                <div class="notification" id="notification" style="display: none;"></div>
                
                <div class="applicant-list" id="applicant-list">
                    <!-- 지원자 데이터가 여기에 동적으로 추가됩니다 -->
                    <div class="empty-state" id="empty-state" style="text-align: center; padding: 40px; color: #718096;">
                        <div style="font-size: 3em; margin-bottom: 20px;">📝</div>
                        <h3>지원자가 없습니다</h3>
                        <p>새로운 지원자가 등록되면 여기에 표시됩니다.</p>
                    </div>
                </div>
            </div>

            <!-- 빠른 작업 -->
            <div class="section">
                <h2>⚡ 빠른 작업</h2>
                
                <div class="quick-actions">
                    <button class="btn btn-primary" onclick="addTestData()">
                        ➕ 테스트 지원자 추가
                    </button>
                    <button class="btn btn-primary" onclick="generateAuthCode()">
                        🔑 인증코드 생성
                    </button>
                    <button class="btn btn-primary" onclick="sendNotifications()">
                        📧 결과 알림 발송
                    </button>
                    <button class="btn btn-primary" onclick="exportData()">
                        📊 데이터 내보내기
                    </button>
                    <button class="btn btn-primary" onclick="refreshData()">
                        🔄 새로고침
                    </button>
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #4a5568; margin-bottom: 15px;">📋 최근 활동</h3>
                    <div style="background: #f7fafc; padding: 15px; border-radius: 10px;" id="recent-activity">
                        <p style="color: #718096; text-align: center;">최근 활동이 없습니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 지원서 보기 모달 -->
    <div id="applicationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📋 지원서 상세보기</h2>
                <button class="close" onclick="closeApplicationModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- 지원서 내용이 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
    </div>

    <script>
        // 지원자 데이터 저장소 (실제 서버 연동 전까지 localStorage 사용)
        let applicantsData = JSON.parse(localStorage.getItem('applicantsData')) || [];
        let rejectedCount = parseInt(localStorage.getItem('rejectedCount')) || 0;

        // 기존 데이터 마이그레이션 (새로운 필드 추가)
        function migrateData() {
            applicantsData = applicantsData.map(applicant => {
                if (!applicant.phone) {
                    return {
                        ...applicant,
                        phone: '010-0000-0000',
                        email: 'user@example.com',
                        experience: '정보 없음',
                        motivation: '기존 지원자입니다.',
                        skills: ['발성'],
                        availableTime: '주말',
                        submitTime: applicant.date + ' 오후 2:00'
                    };
                }
                return applicant;
            });
            saveData();
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', function() {
            checkAdminAccess();
            migrateData();
            loadApplicants();
            updateCounts();
        });

        // 지원자 목록 로드
        function loadApplicants() {
            const applicantList = document.getElementById('applicant-list');
            const emptyState = document.getElementById('empty-state');
            
            if (applicantsData.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            applicantList.innerHTML = '';
            applicantsData.forEach(applicant => {
                if (applicant.status !== 'rejected') {
                    const applicantElement = createApplicantElement(applicant);
                    applicantList.appendChild(applicantElement);
                }
            });
        }

        // 지원자 요소 생성
        function createApplicantElement(applicant) {
            const div = document.createElement('div');
            div.className = 'applicant-item';
            div.setAttribute('data-id', applicant.id);
            div.setAttribute('data-status', applicant.status);
            
            const statusClass = applicant.status === 'approved' ? 'status-approved' : 'status-pending';
            const statusText = applicant.status === 'approved' ? '승인 완료' : '심사 대기';
            
            div.innerHTML = `
                <div class="applicant-info">
                    <h3><span class="applicant-name" onclick="showApplicationDetails(${applicant.id})">${applicant.name}</span> (${applicant.age}세)</h3>
                    <p>${applicant.genre} | ${applicant.song}</p>
                    <p style="font-size: 0.8em; color: #a0aec0;">지원일: ${applicant.date}</p>
                </div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <span class="status-badge ${statusClass}">${statusText}</span>
                    ${applicant.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="btn btn-approve" onclick="approveApplicant(${applicant.id})">승인</button>
                            <button class="btn btn-reject" onclick="rejectApplicant(${applicant.id})">거절</button>
                        </div>
                    ` : ''}
                </div>
            `;
            
            return div;
        }

        // 새 지원자 추가 (시뮬레이션 - 실제로는 외부 폼에서 데이터가 들어옴)
        function addTestApplicant() {
            const names = ['김보컬', '이가수', '박아티스트', '최뮤지션', '정싱어', '한보이스'];
            const genres = ['팝', 'R&B', '인디', '발라드', '록', '재즈'];
            const songs = ['좋은 날 - 아이유', 'Through the Night - 아이유', '사랑한다 안한다 - 윤하', '호텔 델루나 - 아이유', '밤편지 - 아이유', '봄날 - BTS'];
            const phones = ['010-1234-5678', '010-9876-5432', '010-5555-1234', '010-7777-8888'];
            const emails = ['vocal@email.com', 'singer@gmail.com', 'artist@naver.com', 'musician@daum.net'];
            const experiences = ['1년 미만', '1-2년', '3-5년', '5년 이상'];
            const motivations = [
                '음악에 대한 열정이 넘치고, 더 많은 사람들에게 제 목소리를 들려주고 싶습니다.',
                '어릴 때부터 꿈꿔온 가수의 꿈을 이루고 싶어 지원하게 되었습니다.',
                '다양한 장르의 음악을 도전해보고 성장하고 싶습니다.',
                '팀워크를 중시하며 함께 음악을 만들어가고 싶습니다.'
            ];
            
            const newApplicant = {
                id: Date.now(),
                name: names[Math.floor(Math.random() * names.length)],
                age: Math.floor(Math.random() * 10) + 20,
                phone: phones[Math.floor(Math.random() * phones.length)],
                email: emails[Math.floor(Math.random() * emails.length)],
                genre: genres[Math.floor(Math.random() * genres.length)],
                song: songs[Math.floor(Math.random() * songs.length)],
                experience: experiences[Math.floor(Math.random() * experiences.length)],
                motivation: motivations[Math.floor(Math.random() * motivations.length)],
                skills: ['발성', '화음', '즉흥연주'].slice(0, Math.floor(Math.random() * 3) + 1),
                availableTime: ['평일 저녁', '주말'][Math.floor(Math.random() * 2)],
                status: 'pending',
                date: new Date().toLocaleDateString('ko-KR'),
                submitTime: new Date().toLocaleString('ko-KR')
            };
            
            applicantsData.push(newApplicant);
            saveData();
            loadApplicants();
            updateCounts();
            addRecentActivity(`${newApplicant.name}님 지원 접수`, '방금 전');
            showNotification('새 지원자가 추가되었습니다.', 'success');
        }

        // 관리자 접근 권한 확인
        function checkAdminAccess() {
            const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            const loginTime = localStorage.getItem('adminLoginTime');
            const currentTime = new Date().getTime();
            
            // 로그인 유효시간 (24시간)
            const validTime = 24 * 60 * 60 * 1000;
            
            if (!isLoggedIn || !loginTime || (currentTime - parseInt(loginTime)) >= validTime) {
                // 로그인되지 않았거나 세션 만료
                alert('로그인이 필요합니다. 메인 페이지로 이동합니다.');
                window.location.href = 'index.html';
                return;
            }
            
            // 로그인 상태 표시
            updateLoginStatus();
        }

        // 로그인 상태 표시 업데이트
        function updateLoginStatus() {
            const navMenu = document.querySelector('.nav-menu');
            
            // 기존 로그아웃 버튼이 있는지 확인
            const existingLogoutBtn = document.querySelector('.nav-menu .logout-item');
            
            if (navMenu && !existingLogoutBtn) {
                // 로그아웃 버튼 추가 (한 번만)
                const logoutItem = document.createElement('li');
                logoutItem.className = 'nav-item logout-item'; // 클래스 추가로 식별
                logoutItem.innerHTML = '<a href="javascript:void(0)" class="nav-link" onclick="adminLogout()">🚪 로그아웃</a>';
                navMenu.appendChild(logoutItem);
            }
        }

        // 관리자 로그아웃
        function adminLogout() {
            if (confirm('로그아웃 하시겠습니까?')) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminLoginTime');
                alert('로그아웃되었습니다.');
                window.location.href = 'index.html';
            }
        }

        // 지원자 승인
        function approveApplicant(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (applicant) {
                applicant.status = 'approved';
                saveData();
                loadApplicants();
                updateCounts();
                addRecentActivity(`${applicant.name}님 승인 완료`, '방금 전');
                showNotification('지원자를 승인했습니다.', 'success');
            }
        }

        // 지원자 거절
        function rejectApplicant(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (applicant && confirm(`${applicant.name}님을 거절하시겠습니까?`)) {
                applicant.status = 'rejected';
                rejectedCount++;
                saveData();
                loadApplicants();
                updateCounts();
                addRecentActivity(`${applicant.name}님 거절 처리`, '방금 전');
                showNotification('지원자를 거절했습니다.', 'warning');
            }
        }

        // 데이터 저장
        function saveData() {
            localStorage.setItem('applicantsData', JSON.stringify(applicantsData));
            localStorage.setItem('rejectedCount', rejectedCount.toString());
        }

        // 통계 업데이트
        function updateCounts() {
            const total = applicantsData.filter(a => a.status !== 'rejected').length;
            const approved = applicantsData.filter(a => a.status === 'approved').length;
            const pending = applicantsData.filter(a => a.status === 'pending').length;
            
            document.getElementById('total-count').textContent = total;
            document.getElementById('approved-count').textContent = approved;
            document.getElementById('pending-count').textContent = pending;
            document.getElementById('rejected-count').textContent = rejectedCount;
        }

        // 최근 활동 추가
        function addRecentActivity(activity, time) {
            const recentActivity = document.getElementById('recent-activity');
            const activities = recentActivity.children;
            
            // 새 활동 추가
            const newActivity = document.createElement('p');
            newActivity.innerHTML = `<strong>${activity}</strong> <span style="color: #718096;">(${time})</span>`;
            newActivity.style.marginBottom = '8px';
            
            // 맨 위에 추가
            if (activities.length > 0 && activities[0].style.color !== '#718096') {
                recentActivity.insertBefore(newActivity, recentActivity.firstChild);
            } else {
                recentActivity.innerHTML = '';
                recentActivity.appendChild(newActivity);
            }
            
            // 최대 5개까지만 표시
            while (recentActivity.children.length > 5) {
                recentActivity.removeChild(recentActivity.lastChild);
            }
        }

        // 알림 표시
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // 빠른 작업 함수들
        function generateAuthCode() {
            const code = 'VOCAL' + Math.random().toString(36).substr(2, 6).toUpperCase();
            showNotification(`인증 코드가 생성되었습니다: ${code}`, 'success');
            addRecentActivity('인증 코드 생성', '방금 전');
        }

        function sendNotifications() {
            const pendingCount = applicantsData.filter(a => a.status === 'pending').length;
            const approvedCount = applicantsData.filter(a => a.status === 'approved').length;
            
            if (pendingCount === 0 && approvedCount === 0) {
                showNotification('발송할 알림이 없습니다.', 'warning');
                return;
            }
            
            showNotification(`${approvedCount + pendingCount}명의 지원자에게 결과 알림을 발송했습니다.`, 'success');
            addRecentActivity('결과 알림 발송', '방금 전');
        }

        function exportData() {
            if (applicantsData.length === 0) {
                showNotification('내보낼 데이터가 없습니다.', 'warning');
                return;
            }
            
            // CSV 형태로 데이터 생성
            const csvContent = [
                ['이름', '나이', '장르', '곡명', '상태', '지원일'].join(','),
                ...applicantsData.map(a => [
                    a.name, a.age, a.genre, a.song, 
                    a.status === 'approved' ? '승인' : a.status === 'pending' ? '대기' : '거절',
                    a.date
                ].join(','))
            ].join('\n');
            
            // 다운로드 링크 생성
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `지원자_목록_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showNotification('지원자 데이터를 CSV 파일로 내보냈습니다.', 'success');
            addRecentActivity('데이터 내보내기', '방금 전');
        }

        function refreshData() {
            loadApplicants();
            updateCounts();
            showNotification('데이터를 새로고침했습니다.', 'success');
        }

        // 테스트 지원자 추가 버튼 (개발용)
        function addTestData() {
            addTestApplicant();
        }

        // 지원서 상세보기 모달 열기
        function showApplicationDetails(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (!applicant) return;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <div class="application-section">
                    <div class="section-title">
                        👤 기본 정보
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">이름</div>
                            <div class="info-value">${applicant.name}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">나이</div>
                            <div class="info-value">${applicant.age}세</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">연락처</div>
                            <div class="info-value">${applicant.phone || '정보 없음'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">이메일</div>
                            <div class="info-value">${applicant.email || '정보 없음'}</div>
                        </div>
                    </div>
                </div>

                <div class="application-section">
                    <div class="section-title">
                        🎵 음악 정보 및 지원 내용
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">선호 장르</div>
                            <div class="info-value">${applicant.genre}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">오디션 곡</div>
                            <div class="info-value">${applicant.song}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">경력</div>
                            <div class="info-value">${applicant.experience || '정보 없음'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">가능한 시간</div>
                            <div class="info-value">${applicant.availableTime || '정보 없음'}</div>
                        </div>
                    </div>
                    
                    ${applicant.skills ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">⭐ 보유 스킬</div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            ${applicant.skills.map(skill => `
                                <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">
                                    ${skill}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${applicant.motivation ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">💭 지원 동기</div>
                        <div style="background: #f7fafc; padding: 20px; border-radius: 10px; line-height: 1.6;">
                            ${applicant.motivation}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${applicant.attachedFiles && applicant.attachedFiles.length > 0 ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">📎 첨부 파일</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            ${applicant.attachedFiles.map(file => `
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; background: #f7fafc; border-radius: 8px; border-left: 4px solid #667eea;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 16px;">${getFileIcon(file.type)}</span>
                                        <div>
                                            <div style="font-weight: 500; color: #4a5568;">${file.name}</div>
                                            <div style="font-size: 12px; color: #718096;">${formatFileSize(file.size)}</div>
                                        </div>
                                    </div>
                                    <button onclick="downloadFile('${file.name}', '${file.data}')" style="background: #667eea; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">다운로드</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>

                <div class="application-section">
                    <div class="section-title">
                        📅 지원 정보
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">지원일</div>
                            <div class="info-value">${applicant.date}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">접수 시간</div>
                            <div class="info-value">${applicant.submitTime || '정보 없음'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">현재 상태</div>
                            <div class="info-value">
                                <span class="status-badge ${applicant.status === 'approved' ? 'status-approved' : 'status-pending'}">
                                    ${applicant.status === 'approved' ? '승인 완료' : '심사 대기'}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                ${applicant.status === 'pending' ? `
                <div style="margin-top: 30px; text-align: center; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                    <button class="btn btn-approve" onclick="approveApplicant(${applicant.id}); closeApplicationModal();" style="margin-right: 10px;">
                        ✅ 승인하기
                    </button>
                    <button class="btn btn-reject" onclick="rejectApplicant(${applicant.id}); closeApplicationModal();">
                        ❌ 거절하기
                    </button>
                </div>
                ` : ''}
            `;
            
            const modal = document.getElementById('applicationModal');
            modal.classList.add('show');
        }

        // 지원서 모달 닫기
        function closeApplicationModal() {
            const modal = document.getElementById('applicationModal');
            modal.classList.remove('show');
        }

        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            const modal = document.getElementById('applicationModal');
            if (event.target === modal) {
                closeApplicationModal();
            }
        }

        // ESC 키로 모달 닫기
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('applicationModal');
                if (modal.classList.contains('show')) {
                    closeApplicationModal();
                }
            }
        });

        // 모바일 메뉴 토글
        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const navToggle = document.querySelector('.nav-toggle');
            
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        }

        // 파일 아이콘 가져오기
        function getFileIcon(fileType) {
            if (fileType.startsWith('audio/')) return '🎵';
            if (fileType.startsWith('video/')) return '🎬';
            if (fileType.startsWith('image/')) return '🖼️';
            if (fileType === 'application/pdf') return '📄';
            if (fileType.includes('document')) return '📝';
            return '📎';
        }

        // 파일 크기 포맷
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // 파일 다운로드
        function downloadFile(fileName, fileData) {
            try {
                const link = document.createElement('a');
                link.href = fileData;
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification(`${fileName} 파일을 다운로드했습니다.`, 'success');
                addRecentActivity(`${fileName} 파일 다운로드`, '방금 전');
            } catch (error) {
                showNotification('파일 다운로드 중 오류가 발생했습니다.', 'warning');
                console.error('File download error:', error);
            }
        }
    </script>
</body>
</html>
