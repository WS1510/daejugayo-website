<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - ëŒ€ì£¼ê°€ìš”</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding-top: 100px; /* ë„¤ë¹„ê²Œì´ì…˜ë°”ë¥¼ ìœ„í•œ íŒ¨ë”© */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #718096;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            color: #718096;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            font-size: 1.8em;
            color: #4a5568;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .applicant-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .applicant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .applicant-info h3 {
            color: #4a5568;
            margin-bottom: 5px;
        }

        .applicant-info p {
            color: #718096;
            font-size: 0.9em;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .status-pending {
            background: #fed7d7;
            color: #c53030;
        }

        .status-approved {
            background: #c6f6d5;
            color: #2f855a;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-approve {
            background: #48bb78;
            color: white;
        }

        .btn-approve:hover {
            background: #38a169;
        }

        .btn-reject {
            background: #f56565;
            color: white;
        }

        .btn-reject:hover {
            background: #e53e3e;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
            margin: 10px 5px;
        }

        .btn-primary:hover {
            background: #5a67d8;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .notification {
            background: #bee3f8;
            border: 1px solid #90cdf4;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .notification.success {
            background: #c6f6d5;
            border-color: #9ae6b4;
            color: #2f855a;
        }

        .notification.warning {
            background: #fefcbf;
            border-color: #f6e05e;
            color: #d69e2e;
        }

        .empty-state {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            color: #718096;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: #4a5568;
        }

        /* ì§€ì›ì„œ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            /* Flexboxë¡œ ì¤‘ì•™ì •ë ¬ */
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 0;
            border-radius: 15px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            /* ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
            /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }

        /* Webkit ë¸Œë¼ìš°ì € (Chrome, Safari) ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
        .modal-content::-webkit-scrollbar {
            display: none;
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5em;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            line-height: 1;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .application-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .application-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .info-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-label {
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 5px;
        }

        .info-value {
            font-weight: bold;
            color: #2d3748;
        }

        .applicant-name {
            cursor: pointer;
            color: #667eea;
            text-decoration: underline;
        }

        .applicant-name:hover {
            color: #5a67d8;
        }

        /* ëª¨ë°”ì¼ ëª¨ë‹¬ ìµœì í™” */
        @media (max-width: 768px) {
            .modal {
                padding: 10px;
            }
            
            .modal-content {
                max-height: 95vh;
                width: 100%;
            }
            
            .modal-header {
                padding: 15px 20px;
            }
            
            .modal-header h2 {
                font-size: 1.3em;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .applicant-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="nav-logo">ğŸµ PLAYLOG SOUNDLAB</h1>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">ğŸ  ë©”ì¸ì‚¬ì´íŠ¸</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link admin-welcome">ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì ëª¨ë“œ</a>
                    </li>
                </ul>
                <div class="nav-toggle" onclick="toggleMobileMenu()">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ê´€ë¦¬ì í˜ì´ì§€</h1>
            <p>ë³´ì»¬ ì§€ì›ì ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-number" id="total-count">0</div>
                <div class="stat-label">ì´ ì§€ì›ì</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âœ…</div>
                <div class="stat-number" id="approved-count">0</div>
                <div class="stat-label">ìŠ¹ì¸ ì™„ë£Œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â³</div>
                <div class="stat-number" id="pending-count">0</div>
                <div class="stat-label">ì‹¬ì‚¬ ëŒ€ê¸°</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âŒ</div>
                <div class="stat-number" id="rejected-count">0</div>
                <div class="stat-label">ê±°ì ˆë¨</div>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì§€ì›ì ëª©ë¡ -->
            <div class="section">
                <h2>ì§€ì›ì ê´€ë¦¬</h2>
                
                <div class="notification" id="notification" style="display: none;"></div>
                
                <div class="applicant-list" id="applicant-list">
                    <!-- ì§€ì›ì ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    <div class="empty-state" id="empty-state" style="text-align: center; padding: 40px; color: #718096;">
                        <div style="font-size: 3em; margin-bottom: 20px;">ğŸ“</div>
                        <h3>ì§€ì›ìê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ìƒˆë¡œìš´ ì§€ì›ìê°€ ë“±ë¡ë˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <!-- ë¹ ë¥¸ ì‘ì—… -->
            <div class="section">
                <h2>âš¡ ë¹ ë¥¸ ì‘ì—…</h2>
                
                <div class="quick-actions">
                    <button class="btn btn-primary" onclick="addTestData()">
                        â• í…ŒìŠ¤íŠ¸ ì§€ì›ì ì¶”ê°€
                    </button>
                    <button class="btn btn-primary" onclick="generateAuthCode()">
                        ğŸ”‘ ì¸ì¦ì½”ë“œ ìƒì„±
                    </button>
                    <button class="btn btn-primary" onclick="sendNotifications()">
                        ğŸ“§ ê²°ê³¼ ì•Œë¦¼ ë°œì†¡
                    </button>
                    <button class="btn btn-primary" onclick="exportData()">
                        ğŸ“Š ë°ì´í„° ë‚´ë³´ë‚´ê¸°
                    </button>
                    <button class="btn btn-primary" onclick="refreshData()">
                        ğŸ”„ ìƒˆë¡œê³ ì¹¨
                    </button>
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #4a5568; margin-bottom: 15px;">ğŸ“‹ ìµœê·¼ í™œë™</h3>
                    <div style="background: #f7fafc; padding: 15px; border-radius: 10px;" id="recent-activity">
                        <p style="color: #718096; text-align: center;">ìµœê·¼ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì§€ì›ì„œ ë³´ê¸° ëª¨ë‹¬ -->
    <div id="applicationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“‹ ì§€ì›ì„œ ìƒì„¸ë³´ê¸°</h2>
                <button class="close" onclick="closeApplicationModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- ì§€ì›ì„œ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ì§€ì›ì ë°ì´í„° ì €ì¥ì†Œ (ì‹¤ì œ ì„œë²„ ì—°ë™ ì „ê¹Œì§€ localStorage ì‚¬ìš©)
        let applicantsData = JSON.parse(localStorage.getItem('applicantsData')) || [];
        let rejectedCount = parseInt(localStorage.getItem('rejectedCount')) || 0;

        // ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (ìƒˆë¡œìš´ í•„ë“œ ì¶”ê°€)
        function migrateData() {
            applicantsData = applicantsData.map(applicant => {
                if (!applicant.phone) {
                    return {
                        ...applicant,
                        phone: '010-0000-0000',
                        email: 'user@example.com',
                        experience: 'ì •ë³´ ì—†ìŒ',
                        motivation: 'ê¸°ì¡´ ì§€ì›ìì…ë‹ˆë‹¤.',
                        skills: ['ë°œì„±'],
                        availableTime: 'ì£¼ë§',
                        submitTime: applicant.date + ' ì˜¤í›„ 2:00'
                    };
                }
                return applicant;
            });
            saveData();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            checkAdminAccess();
            migrateData();
            loadApplicants();
            updateCounts();
        });

        // ì§€ì›ì ëª©ë¡ ë¡œë“œ
        function loadApplicants() {
            const applicantList = document.getElementById('applicant-list');
            const emptyState = document.getElementById('empty-state');
            
            if (applicantsData.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            applicantList.innerHTML = '';
            applicantsData.forEach(applicant => {
                if (applicant.status !== 'rejected') {
                    const applicantElement = createApplicantElement(applicant);
                    applicantList.appendChild(applicantElement);
                }
            });
        }

        // ì§€ì›ì ìš”ì†Œ ìƒì„±
        function createApplicantElement(applicant) {
            const div = document.createElement('div');
            div.className = 'applicant-item';
            div.setAttribute('data-id', applicant.id);
            div.setAttribute('data-status', applicant.status);
            
            const statusClass = applicant.status === 'approved' ? 'status-approved' : 'status-pending';
            const statusText = applicant.status === 'approved' ? 'ìŠ¹ì¸ ì™„ë£Œ' : 'ì‹¬ì‚¬ ëŒ€ê¸°';
            
            div.innerHTML = `
                <div class="applicant-info">
                    <h3><span class="applicant-name" onclick="showApplicationDetails(${applicant.id})">${applicant.name}</span> (${applicant.age}ì„¸)</h3>
                    <p>${applicant.genre} | ${applicant.song}</p>
                    <p style="font-size: 0.8em; color: #a0aec0;">ì§€ì›ì¼: ${applicant.date}</p>
                </div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <span class="status-badge ${statusClass}">${statusText}</span>
                    ${applicant.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="btn btn-approve" onclick="approveApplicant(${applicant.id})">ìŠ¹ì¸</button>
                            <button class="btn btn-reject" onclick="rejectApplicant(${applicant.id})">ê±°ì ˆ</button>
                        </div>
                    ` : ''}
                </div>
            `;
            
            return div;
        }

        // ìƒˆ ì§€ì›ì ì¶”ê°€ (ì‹œë®¬ë ˆì´ì…˜ - ì‹¤ì œë¡œëŠ” ì™¸ë¶€ í¼ì—ì„œ ë°ì´í„°ê°€ ë“¤ì–´ì˜´)
        function addTestApplicant() {
            const names = ['ê¹€ë³´ì»¬', 'ì´ê°€ìˆ˜', 'ë°•ì•„í‹°ìŠ¤íŠ¸', 'ìµœë®¤ì§€ì…˜', 'ì •ì‹±ì–´', 'í•œë³´ì´ìŠ¤'];
            const genres = ['íŒ', 'R&B', 'ì¸ë””', 'ë°œë¼ë“œ', 'ë¡', 'ì¬ì¦ˆ'];
            const songs = ['ì¢‹ì€ ë‚  - ì•„ì´ìœ ', 'Through the Night - ì•„ì´ìœ ', 'ì‚¬ë‘í•œë‹¤ ì•ˆí•œë‹¤ - ìœ¤í•˜', 'í˜¸í…” ë¸ë£¨ë‚˜ - ì•„ì´ìœ ', 'ë°¤í¸ì§€ - ì•„ì´ìœ ', 'ë´„ë‚  - BTS'];
            const phones = ['010-1234-5678', '010-9876-5432', '010-5555-1234', '010-7777-8888'];
            const emails = ['vocal@email.com', 'singer@gmail.com', 'artist@naver.com', 'musician@daum.net'];
            const experiences = ['1ë…„ ë¯¸ë§Œ', '1-2ë…„', '3-5ë…„', '5ë…„ ì´ìƒ'];
            const motivations = [
                'ìŒì•…ì— ëŒ€í•œ ì—´ì •ì´ ë„˜ì¹˜ê³ , ë” ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ì œ ëª©ì†Œë¦¬ë¥¼ ë“¤ë ¤ì£¼ê³  ì‹¶ìŠµë‹ˆë‹¤.',
                'ì–´ë¦´ ë•Œë¶€í„° ê¿ˆê¿”ì˜¨ ê°€ìˆ˜ì˜ ê¿ˆì„ ì´ë£¨ê³  ì‹¶ì–´ ì§€ì›í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.',
                'ë‹¤ì–‘í•œ ì¥ë¥´ì˜ ìŒì•…ì„ ë„ì „í•´ë³´ê³  ì„±ì¥í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.',
                'íŒ€ì›Œí¬ë¥¼ ì¤‘ì‹œí•˜ë©° í•¨ê»˜ ìŒì•…ì„ ë§Œë“¤ì–´ê°€ê³  ì‹¶ìŠµë‹ˆë‹¤.'
            ];
            
            const newApplicant = {
                id: Date.now(),
                name: names[Math.floor(Math.random() * names.length)],
                age: Math.floor(Math.random() * 10) + 20,
                phone: phones[Math.floor(Math.random() * phones.length)],
                email: emails[Math.floor(Math.random() * emails.length)],
                genre: genres[Math.floor(Math.random() * genres.length)],
                song: songs[Math.floor(Math.random() * songs.length)],
                experience: experiences[Math.floor(Math.random() * experiences.length)],
                motivation: motivations[Math.floor(Math.random() * motivations.length)],
                skills: ['ë°œì„±', 'í™”ìŒ', 'ì¦‰í¥ì—°ì£¼'].slice(0, Math.floor(Math.random() * 3) + 1),
                availableTime: ['í‰ì¼ ì €ë…', 'ì£¼ë§'][Math.floor(Math.random() * 2)],
                status: 'pending',
                date: new Date().toLocaleDateString('ko-KR'),
                submitTime: new Date().toLocaleString('ko-KR')
            };
            
            applicantsData.push(newApplicant);
            saveData();
            loadApplicants();
            updateCounts();
            addRecentActivity(`${newApplicant.name}ë‹˜ ì§€ì› ì ‘ìˆ˜`, 'ë°©ê¸ˆ ì „');
            showNotification('ìƒˆ ì§€ì›ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ê´€ë¦¬ì ì ‘ê·¼ ê¶Œí•œ í™•ì¸
        function checkAdminAccess() {
            const isLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            const loginTime = localStorage.getItem('adminLoginTime');
            const currentTime = new Date().getTime();
            
            // ë¡œê·¸ì¸ ìœ íš¨ì‹œê°„ (24ì‹œê°„)
            const validTime = 24 * 60 * 60 * 1000;
            
            if (!isLoggedIn || !loginTime || (currentTime - parseInt(loginTime)) >= validTime) {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì„¸ì…˜ ë§Œë£Œ
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
                window.location.href = 'index.html';
                return;
            }
            
            // ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ
            updateLoginStatus();
        }

        // ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateLoginStatus() {
            const navMenu = document.querySelector('.nav-menu');
            
            // ê¸°ì¡´ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì´ ìˆëŠ”ì§€ í™•ì¸
            const existingLogoutBtn = document.querySelector('.nav-menu .logout-item');
            
            if (navMenu && !existingLogoutBtn) {
                // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì¶”ê°€ (í•œ ë²ˆë§Œ)
                const logoutItem = document.createElement('li');
                logoutItem.className = 'nav-item logout-item'; // í´ë˜ìŠ¤ ì¶”ê°€ë¡œ ì‹ë³„
                logoutItem.innerHTML = '<a href="javascript:void(0)" class="nav-link" onclick="adminLogout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</a>';
                navMenu.appendChild(logoutItem);
            }
        }

        // ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒ
        function adminLogout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminLoginTime');
                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = 'index.html';
            }
        }

        // ì§€ì›ì ìŠ¹ì¸
        function approveApplicant(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (applicant) {
                applicant.status = 'approved';
                saveData();
                loadApplicants();
                updateCounts();
                addRecentActivity(`${applicant.name}ë‹˜ ìŠ¹ì¸ ì™„ë£Œ`, 'ë°©ê¸ˆ ì „');
                showNotification('ì§€ì›ìë¥¼ ìŠ¹ì¸í–ˆìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // ì§€ì›ì ê±°ì ˆ
        function rejectApplicant(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (applicant && confirm(`${applicant.name}ë‹˜ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                applicant.status = 'rejected';
                rejectedCount++;
                saveData();
                loadApplicants();
                updateCounts();
                addRecentActivity(`${applicant.name}ë‹˜ ê±°ì ˆ ì²˜ë¦¬`, 'ë°©ê¸ˆ ì „');
                showNotification('ì§€ì›ìë¥¼ ê±°ì ˆí–ˆìŠµë‹ˆë‹¤.', 'warning');
            }
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('applicantsData', JSON.stringify(applicantsData));
            localStorage.setItem('rejectedCount', rejectedCount.toString());
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateCounts() {
            const total = applicantsData.filter(a => a.status !== 'rejected').length;
            const approved = applicantsData.filter(a => a.status === 'approved').length;
            const pending = applicantsData.filter(a => a.status === 'pending').length;
            
            document.getElementById('total-count').textContent = total;
            document.getElementById('approved-count').textContent = approved;
            document.getElementById('pending-count').textContent = pending;
            document.getElementById('rejected-count').textContent = rejectedCount;
        }

        // ìµœê·¼ í™œë™ ì¶”ê°€
        function addRecentActivity(activity, time) {
            const recentActivity = document.getElementById('recent-activity');
            const activities = recentActivity.children;
            
            // ìƒˆ í™œë™ ì¶”ê°€
            const newActivity = document.createElement('p');
            newActivity.innerHTML = `<strong>${activity}</strong> <span style="color: #718096;">(${time})</span>`;
            newActivity.style.marginBottom = '8px';
            
            // ë§¨ ìœ„ì— ì¶”ê°€
            if (activities.length > 0 && activities[0].style.color !== '#718096') {
                recentActivity.insertBefore(newActivity, recentActivity.firstChild);
            } else {
                recentActivity.innerHTML = '';
                recentActivity.appendChild(newActivity);
            }
            
            // ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ í‘œì‹œ
            while (recentActivity.children.length > 5) {
                recentActivity.removeChild(recentActivity.lastChild);
            }
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ë¹ ë¥¸ ì‘ì—… í•¨ìˆ˜ë“¤
        function generateAuthCode() {
            const code = 'VOCAL' + Math.random().toString(36).substr(2, 6).toUpperCase();
            showNotification(`ì¸ì¦ ì½”ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: ${code}`, 'success');
            addRecentActivity('ì¸ì¦ ì½”ë“œ ìƒì„±', 'ë°©ê¸ˆ ì „');
        }

        function sendNotifications() {
            const pendingCount = applicantsData.filter(a => a.status === 'pending').length;
            const approvedCount = applicantsData.filter(a => a.status === 'approved').length;
            
            if (pendingCount === 0 && approvedCount === 0) {
                showNotification('ë°œì†¡í•  ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                return;
            }
            
            showNotification(`${approvedCount + pendingCount}ëª…ì˜ ì§€ì›ìì—ê²Œ ê²°ê³¼ ì•Œë¦¼ì„ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.`, 'success');
            addRecentActivity('ê²°ê³¼ ì•Œë¦¼ ë°œì†¡', 'ë°©ê¸ˆ ì „');
        }

        function exportData() {
            if (applicantsData.length === 0) {
                showNotification('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                return;
            }
            
            // CSV í˜•íƒœë¡œ ë°ì´í„° ìƒì„±
            const csvContent = [
                ['ì´ë¦„', 'ë‚˜ì´', 'ì¥ë¥´', 'ê³¡ëª…', 'ìƒíƒœ', 'ì§€ì›ì¼'].join(','),
                ...applicantsData.map(a => [
                    a.name, a.age, a.genre, a.song, 
                    a.status === 'approved' ? 'ìŠ¹ì¸' : a.status === 'pending' ? 'ëŒ€ê¸°' : 'ê±°ì ˆ',
                    a.date
                ].join(','))
            ].join('\n');
            
            // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ì§€ì›ì_ëª©ë¡_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
            
            showNotification('ì§€ì›ì ë°ì´í„°ë¥¼ CSV íŒŒì¼ë¡œ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤.', 'success');
            addRecentActivity('ë°ì´í„° ë‚´ë³´ë‚´ê¸°', 'ë°©ê¸ˆ ì „');
        }

        function refreshData() {
            loadApplicants();
            updateCounts();
            showNotification('ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í–ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // í…ŒìŠ¤íŠ¸ ì§€ì›ì ì¶”ê°€ ë²„íŠ¼ (ê°œë°œìš©)
        function addTestData() {
            addTestApplicant();
        }

        // ì§€ì›ì„œ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ì—´ê¸°
        function showApplicationDetails(id) {
            const applicant = applicantsData.find(a => a.id === id);
            if (!applicant) return;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <div class="application-section">
                    <div class="section-title">
                        ğŸ‘¤ ê¸°ë³¸ ì •ë³´
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">ì´ë¦„</div>
                            <div class="info-value">${applicant.name}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ë‚˜ì´</div>
                            <div class="info-value">${applicant.age}ì„¸</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì—°ë½ì²˜</div>
                            <div class="info-value">${applicant.phone || 'ì •ë³´ ì—†ìŒ'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì´ë©”ì¼</div>
                            <div class="info-value">${applicant.email || 'ì •ë³´ ì—†ìŒ'}</div>
                        </div>
                    </div>
                </div>

                <div class="application-section">
                    <div class="section-title">
                        ğŸµ ìŒì•… ì •ë³´ ë° ì§€ì› ë‚´ìš©
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">ì„ í˜¸ ì¥ë¥´</div>
                            <div class="info-value">${applicant.genre}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì˜¤ë””ì…˜ ê³¡</div>
                            <div class="info-value">${applicant.song}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ê²½ë ¥</div>
                            <div class="info-value">${applicant.experience || 'ì •ë³´ ì—†ìŒ'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ê°€ëŠ¥í•œ ì‹œê°„</div>
                            <div class="info-value">${applicant.availableTime || 'ì •ë³´ ì—†ìŒ'}</div>
                        </div>
                    </div>
                    
                    ${applicant.skills ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">â­ ë³´ìœ  ìŠ¤í‚¬</div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            ${applicant.skills.map(skill => `
                                <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">
                                    ${skill}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${applicant.motivation ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">ğŸ’­ ì§€ì› ë™ê¸°</div>
                        <div style="background: #f7fafc; padding: 20px; border-radius: 10px; line-height: 1.6;">
                            ${applicant.motivation}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${applicant.attachedFiles && applicant.attachedFiles.length > 0 ? `
                    <div style="margin-top: 20px;">
                        <div style="font-weight: bold; color: #4a5568; margin-bottom: 10px;">ğŸ“ ì²¨ë¶€ íŒŒì¼</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            ${applicant.attachedFiles.map(file => `
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; background: #f7fafc; border-radius: 8px; border-left: 4px solid #667eea;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 16px;">${getFileIcon(file.type)}</span>
                                        <div>
                                            <div style="font-weight: 500; color: #4a5568;">${file.name}</div>
                                            <div style="font-size: 12px; color: #718096;">${formatFileSize(file.size)}</div>
                                        </div>
                                    </div>
                                    <button onclick="downloadFile('${file.name}', '${file.data}')" style="background: #667eea; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">ë‹¤ìš´ë¡œë“œ</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    ` : ''}
                </div>

                <div class="application-section">
                    <div class="section-title">
                        ğŸ“… ì§€ì› ì •ë³´
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">ì§€ì›ì¼</div>
                            <div class="info-value">${applicant.date}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ì ‘ìˆ˜ ì‹œê°„</div>
                            <div class="info-value">${applicant.submitTime || 'ì •ë³´ ì—†ìŒ'}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">í˜„ì¬ ìƒíƒœ</div>
                            <div class="info-value">
                                <span class="status-badge ${applicant.status === 'approved' ? 'status-approved' : 'status-pending'}">
                                    ${applicant.status === 'approved' ? 'ìŠ¹ì¸ ì™„ë£Œ' : 'ì‹¬ì‚¬ ëŒ€ê¸°'}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                ${applicant.status === 'pending' ? `
                <div style="margin-top: 30px; text-align: center; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                    <button class="btn btn-approve" onclick="approveApplicant(${applicant.id}); closeApplicationModal();" style="margin-right: 10px;">
                        âœ… ìŠ¹ì¸í•˜ê¸°
                    </button>
                    <button class="btn btn-reject" onclick="rejectApplicant(${applicant.id}); closeApplicationModal();">
                        âŒ ê±°ì ˆí•˜ê¸°
                    </button>
                </div>
                ` : ''}
            `;
            
            const modal = document.getElementById('applicationModal');
            modal.classList.add('show');
        }

        // ì§€ì›ì„œ ëª¨ë‹¬ ë‹«ê¸°
        function closeApplicationModal() {
            const modal = document.getElementById('applicationModal');
            modal.classList.remove('show');
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('applicationModal');
            if (event.target === modal) {
                closeApplicationModal();
            }
        }

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('applicationModal');
                if (modal.classList.contains('show')) {
                    closeApplicationModal();
                }
            }
        });

        // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const navToggle = document.querySelector('.nav-toggle');
            
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        }

        // íŒŒì¼ ì•„ì´ì½˜ ê°€ì ¸ì˜¤ê¸°
        function getFileIcon(fileType) {
            if (fileType.startsWith('audio/')) return 'ğŸµ';
            if (fileType.startsWith('video/')) return 'ğŸ¬';
            if (fileType.startsWith('image/')) return 'ğŸ–¼ï¸';
            if (fileType === 'application/pdf') return 'ğŸ“„';
            if (fileType.includes('document')) return 'ğŸ“';
            return 'ğŸ“';
        }

        // íŒŒì¼ í¬ê¸° í¬ë§·
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadFile(fileName, fileData) {
            try {
                const link = document.createElement('a');
                link.href = fileData;
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification(`${fileName} íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí–ˆìŠµë‹ˆë‹¤.`, 'success');
                addRecentActivity(`${fileName} íŒŒì¼ ë‹¤ìš´ë¡œë“œ`, 'ë°©ê¸ˆ ì „');
            } catch (error) {
                showNotification('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'warning');
                console.error('File download error:', error);
            }
        }
    </script>
</body>
</html>
